{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "bg-moai",
  "type": "registry:ui",
  "title": "Moai Background",
  "description": "Get Moai-Moai",
  "author": "Ansh Singh Sonkhia",
  "dependencies": [
    "react"
  ],
  "registryDependencies": [],
  "files": [
    {
      "type": "registry:ui",
      "content": "\"use client\";\r\n\r\nimport React, { useEffect, useMemo, useRef } from \"react\";\r\n\r\nexport type MoaiParallaxBackgroundProps = {\r\n  imageUrl?: string;\r\n  count?: number;\r\n  speed?: number;\r\n  interactive?: boolean;\r\n  zIndex?: number;\r\n  className?: string;\r\n  seed?: number;\r\n};\r\n\r\ntype Instance = {\r\n  x: number;\r\n  y: number;\r\n  depth: number;\r\n  scale: number;\r\n  flip: boolean;\r\n  bobDur: number;\r\n  tiltDur: number;\r\n  delay: number;\r\n  hue: number;\r\n  blur: number;\r\n  opacity: number;\r\n};\r\n\r\nconst DEFAULT_IMG =\r\n  \"https://raw.githubusercontent.com/AnshSinghSonkhia/AnshSinghSonkhia/refs/heads/main/pumki-assets/moai.png\";\r\n\r\nexport const MoaiParallaxBackground: React.FC<MoaiParallaxBackgroundProps> = ({\r\n  imageUrl = DEFAULT_IMG,\r\n  count = 12,\r\n  speed = 1,\r\n  interactive = true,\r\n  zIndex = 0,\r\n  className,\r\n  seed = 42,\r\n}) => {\r\n  const rootRef = useRef<HTMLDivElement | null>(null);\r\n\r\n  // Deterministic PRNG\r\n  const rand = useMemo(() => {\r\n    let s = seed >>> 0;\r\n    return () => {\r\n      s ^= s << 13;\r\n      s ^= s >>> 17;\r\n      s ^= s << 5;\r\n      const t = (s >>> 0) / 4294967296;\r\n      return t;\r\n    };\r\n  }, [seed]);\r\n\r\n  const instances = useMemo<Instance[]>(() => {\r\n    const arr: Instance[] = [];\r\n    for (let i = 0; i < count; i++) {\r\n      const depth = 0.25 + rand() * 0.9;\r\n      const scale = 0.6 + rand() * 0.7;\r\n      const yBase = 0.15 + rand() * 0.7;\r\n      const xBase = rand();\r\n      const flip = rand() > 0.5;\r\n      const bobDur = 10 + rand() * 14;\r\n      const tiltDur = 12 + rand() * 18;\r\n      const delay = -rand() * 20;\r\n      const hue = (rand() - 0.5) * 10;\r\n      const blur = Math.round((1 - depth) * 6) / 2;\r\n      const opacity = 0.25 + depth * 0.65;\r\n      arr.push({\r\n        x: xBase,\r\n        y: yBase,\r\n        depth,\r\n        scale,\r\n        flip,\r\n        bobDur,\r\n        tiltDur,\r\n        delay,\r\n        hue,\r\n        blur,\r\n        opacity,\r\n      });\r\n    }\r\n    return arr.sort((a, b) => a.depth - b.depth); // far â†’ near\r\n  }, [count, rand]);\r\n\r\n  // Parallax follow mouse\r\n  useEffect(() => {\r\n    const el = rootRef.current;\r\n    if (!el || !interactive) return;\r\n\r\n    let raf = 0;\r\n    let targetX = 0,\r\n      targetY = 0,\r\n      currentX = 0,\r\n      currentY = 0;\r\n\r\n    const onMove = (e: MouseEvent) => {\r\n      const { innerWidth, innerHeight } = window;\r\n      targetX = (e.clientX / innerWidth) * 2 - 1;\r\n      targetY = (e.clientY / innerHeight) * 2 - 1;\r\n    };\r\n\r\n    const tick = () => {\r\n      currentX += (targetX - currentX) * 0.06;\r\n      currentY += (targetY - currentY) * 0.06;\r\n      el.style.setProperty(\"--mx\", currentX.toFixed(4));\r\n      el.style.setProperty(\"--my\", currentY.toFixed(4));\r\n      raf = requestAnimationFrame(tick);\r\n    };\r\n\r\n    window.addEventListener(\"mousemove\", onMove, { passive: true });\r\n    raf = requestAnimationFrame(tick);\r\n\r\n    return () => {\r\n      window.removeEventListener(\"mousemove\", onMove);\r\n      cancelAnimationFrame(raf);\r\n    };\r\n  }, [interactive]);\r\n\r\n  return (\r\n    <div\r\n      ref={rootRef}\r\n      className={`moai-bg ${className || \"\"}`}\r\n      style={{ zIndex }}\r\n    >\r\n      {instances.map((inst, i) => (\r\n        <img\r\n          key={i}\r\n          src={imageUrl}\r\n          alt=\"Moai\"\r\n          className=\"moai\"\r\n          style={\r\n            {\r\n              \"--x\": inst.x,\r\n              \"--y\": inst.y,\r\n              \"--depth\": inst.depth,\r\n              \"--scale\": inst.scale,\r\n              \"--bobDur\": `${inst.bobDur / speed}s`,\r\n              \"--tiltDur\": `${inst.tiltDur / speed}s`,\r\n              \"--delay\": `${inst.delay}s`,\r\n              \"--hue\": `${inst.hue}deg`,\r\n              \"--blur\": `${inst.blur}px`,\r\n              \"--opacity\": inst.opacity,\r\n              \"--flip\": inst.flip ? \"-1\" : \"1\",\r\n            } as React.CSSProperties\r\n          }\r\n        />\r\n      ))}\r\n      <style jsx>{`\r\n        .moai-bg {\r\n          position: absolute;\r\n          inset: 0;\r\n          overflow: hidden;\r\n          pointer-events: none;\r\n          --mx: 0;\r\n          --my: 0;\r\n          background: black;\r\n        }\r\n        .moai {\r\n          position: absolute;\r\n          width: 240px;\r\n          height: auto;\r\n          left: calc((var(--x) * 100%) - 4vw);\r\n          top: calc(var(--y) * 100%);\r\n          transform: translate(-50%, -50%)\r\n            scale(calc(var(--scale) * var(--depth)))\r\n            scaleX(var(--flip));\r\n          opacity: var(--opacity);\r\n          filter: hue-rotate(var(--hue)) blur(var(--blur));\r\n          animation: bob var(--bobDur) ease-in-out infinite alternate,\r\n            tilt var(--tiltDur) ease-in-out infinite alternate;\r\n          animation-delay: var(--delay);\r\n          transform-origin: center bottom;\r\n        }\r\n        .moai-bg .moai {\r\n          transform: translate(\r\n              calc((-50% + var(--mx) * 30px) * var(--depth)),\r\n              calc((-50% + var(--my) * 20px) * var(--depth))\r\n            )\r\n            scale(calc(var(--scale) * var(--depth)))\r\n            scaleX(var(--flip));\r\n        }\r\n        @keyframes bob {\r\n          from {\r\n            transform: translateY(0) scaleX(var(--flip));\r\n          }\r\n          to {\r\n            transform: translateY(-15px) scaleX(var(--flip));\r\n          }\r\n        }\r\n        @keyframes tilt {\r\n          from {\r\n            transform: rotate(-2deg) scaleX(var(--flip));\r\n          }\r\n          to {\r\n            transform: rotate(2deg) scaleX(var(--flip));\r\n          }\r\n        }\r\n      `}</style>\r\n    </div>\r\n  );\r\n};",
      "path": "components/pumki-ui/backgrounds/bg-moai.tsx",
      "target": "components/pumki-ui/backgrounds/bg-moai.tsx"
    }
  ]
}